name: Simulacao - Inserir Usuario e Senha

on:
  workflow_dispatch:
    inputs:
      usuario:
        description: "Nome do usuario"
        required: true
        type: string

      senha:
        description: "Senha do usuario"
        required: true
        type: string

jobs:
  simulacao:
    runs-on: ubuntu-latest

    steps:
      - name: Simular aplicacao iniciando
        env:
          APP_USER: ${{ inputs.usuario }}
          APP_PASSWORD: ${{ inputs.senha }}
        run: |
          echo "Aplicacao iniciada"
          echo "Usuario recebido: $APP_USER"
          echo "Senha carregada em memoria (nao sera exibida)"

      - name: Simular validacao
        env:
          APP_USER: ${{ inputs.usuario }}
          APP_PASSWORD: ${{ inputs.senha }}
        run: |
          if [ "$APP_USER" = "admin" ]; then
            echo "Usuario valido"
          else
            echo "Usuario invalido"
            exit 1
          fi

      - name: Finalizar com sucesso
        run: |
          echo ""
          echo "=============================================="
          echo "âœ…  AÃ‡ÃƒO CONCLUÃDA COM SUCESSO!"
          echo "=============================================="
          echo ""
          echo "ðŸ‘¤ UsuÃ¡rio informado : ${{ inputs.usuario }}"
          echo "ðŸ” Senha             : ********"
          echo ""
          echo "ðŸš€ O ambiente foi processado corretamente."
          echo "ðŸ“… Data              : $(date)"
          echo "ðŸ–¥ï¸  Runner            : $RUNNER_OS"
          echo ""
          echo "=============================================="

      - name: Criar summary
        run: |
          echo "## âœ… AÃ§Ã£o concluÃ­da com sucesso" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "- ðŸ‘¤ UsuÃ¡rio: **${{ inputs.usuario }}**" >> $GITHUB_STEP_SUMMARY
          echo "- ðŸ” Senha: **Protegida**" >> $GITHUB_STEP_SUMMARY
          echo "- ðŸš€ Status: **OK**" >> $GITHUB_STEP_SUMMARY
